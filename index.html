<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Envelope + Text Animation</title>
<style>
/* ======================
   ğŸ’¡ ë¹„ìœ¨ ê³ ì • ë˜í¼ ì¶”ê°€
   ====================== */
body {
  margin: 0;
  background-color: #000000;
  font-family: 'Pretendard', 'Noto Sans KR', sans-serif;
  transition: background-color 1.5s ease;
  overflow-x: hidden;
  display: flex;
  justify-content: center;
}

/* ì•„ì´í° 11 ê¸°ì¤€ í™”ë©´ í¬ê¸° (375x812) */
.scale-wrapper {
  width: 375px;
  height: 812px;
  transform: scale(calc(100vw / 375));
  transform-origin: top center;
  overflow: hidden;
}

/* ======================
   ê¸°ì¡´ ìŠ¤íƒ€ì¼ ìœ ì§€
   ====================== */
.hero {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  position: relative;
}

.envelope {
  position: relative;
  width: 300px;
  height: 200px;
  perspective: 800px;
  cursor: pointer;
}

.envelope-body {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  transform-origin: center center;
}

.envelope img {
  position: absolute;
  width: 100%;
  height: 100%;
  object-fit: contain;
  top: 0;
  left: 0;
  transition: transform 1s ease-in-out, z-index 0s linear 0s, opacity 1s ease-in-out;
}

/* ë ˆì´ì–´ ì„¤ì • */
.back { z-index: 1; }
.shadow-flap { z-index: 2; opacity: 0; transform-origin: top center; top: 0.5px; }
.letter { z-index: 3; }
.front { z-index: 5; }
.flap { z-index: 6; transform-origin: top center; top: 0.5px; }

/* í…ìŠ¤íŠ¸ ì„¹ì…˜ */
.trigger-section {
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: center;
  text-align: center;
  min-height: 100vh;
  transform: translateY(-220px); /* â† í…ìŠ¤íŠ¸ ì „ì²´ ìœ„ì¹˜ (ì¡°ì • í¬ì¸íŠ¸) */
  opacity: 0;
  transition: opacity 1s ease;
}

/* í…ìŠ¤íŠ¸ ì• ë‹ˆë©”ì´ì…˜ */
.jungle-cont__title,
.jungle-cont__sub,
.jungle-cont__desc {
  opacity: 0;
  transform: translateY(40px);
  filter: blur(8px);
  transition: all 1s ease-out;
}

.show {
  opacity: 1;
  transform: translateY(0);
  filter: blur(0);
}

/* ìƒ‰ìƒ/í°íŠ¸ í¬ê¸° */
.jungle-cont__title,
.jungle-cont__sub { color: #c60000; }
.jungle-cont__desc { color: #000000; }

.jungle-cont__title { font-size: 1.2rem; font-weight: 700; margin-bottom: 0.8rem; } /* ğŸ”§ ì œëª© í¬ê¸°/ê°„ê²© */
.jungle-cont__sub { font-size: 0.9rem; margin-bottom: 0.8rem; } /* ğŸ”§ ë¶€ì œ í¬ê¸°/ê°„ê²© */
.jungle-cont__desc { font-size: 0.8rem; line-height: 1.6; max-width: 800px; padding: 0 1rem; } /* ğŸ”§ ì„¤ëª… */

.trigger-active { opacity: 1; }

/* ëª¨ë°”ì¼ ì‚¬ì´ì¦ˆì—ì„œë„ ë™ì¼í•˜ê²Œ ì‘ë™ */
@media (max-width: 480px) {
  .scale-wrapper {
    transform: scale(1);
    width: 100%;
    height: 100vh;
  }
  .trigger-section { transform: translateY(-200px); }
}
</style>
</head>
<body>

<!-- ğŸ’¡ ì¶”ê°€ëœ ë˜í¼ -->
<div class="scale-wrapper">
  <section class="hero">
    <div class="envelope">
      <div class="envelope-body">
        <img src="envelope-back.png" class="back" alt="ë´‰íˆ¬ ë’·ë©´">
        <img src="envelope-shadow-flap.png" class="shadow-flap" alt="ëšœê»‘ ê·¸ë¦¼ì">
        <img src="envelope-front.png" class="front" alt="ë´‰íˆ¬ ì•ë©´">
        <img src="envelope-flap.png" class="flap" alt="ë´‰íˆ¬ ëšœê»‘">
      </div>
      <img src="letter.png" class="letter" alt="í¸ì§€">
    </div>
  </section>

  <section class="trigger-section" id="triggerSection">
    <div class="jungle-cont__copy">
      <p class="jungle-cont__title">ë‹¹ì‹ ì„ ì´ˆëŒ€í•©ë‹ˆë‹¤</p>
      <p class="jungle-cont__sub">ì¡°ì„ ëŒ€í•™êµ ì‹œê°ë””ìì¸í•™ê³¼ 75th ì¡¸ì—…ì „ì‹œíšŒ</p>
      <p class="jungle-cont__desc">
        ë¹›ê³¼ ìƒ‰, í˜•íƒœë¡œ ì„¸ìƒì„ í‘œí˜„í•œ ì—¬ëŸ¬ë¶„ì˜ ì—¬ì •ì— ë°•ìˆ˜ë¥¼ ë³´ëƒ…ë‹ˆë‹¤.<br>
        <span>ìˆ˜ë§ì€ ê³ ë¯¼ê³¼ ì‹œë„ê°€ ëª¨ì—¬ ì˜¤ëŠ˜ì˜ ì „ì‹œë¥¼ ë§Œë“¤ì—ˆë„¤ìš”.<br>
        ë‹¹ì‹ ì˜ ë””ìì¸ì´ ì•ìœ¼ë¡œë„ ì„¸ìƒì— ìƒˆë¡œìš´ ì‹œì„ ì„ ë”í•´ì£¼ê¸¸ ë°”ëë‹ˆë‹¤.</span><br><br>
        <span>ì´ ì—¬ì •ì˜ ëì´ ë˜ ë‹¤ë¥¸ ì‹œì‘ì´ ë˜ê¸°ë¥¼ ì‘ì›í•©ë‹ˆë‹¤.<br>
        ì‹œê°ë””ìì¸í•™ê³¼ ì¡¸ì—…ì „ì‹œíšŒë¥¼ ì§„ì‹¬ìœ¼ë¡œ ì¶•í•˜ë“œë¦½ë‹ˆë‹¤!</span><br><br>
      </p>
    </div>
  </section>
</div>

<script>
const envelope = document.querySelector('.envelope');
const envelopeBody = document.querySelector('.envelope-body');
const flap = document.querySelector('.flap');
const shadowFlap = document.querySelector('.shadow-flap');
const letter = document.querySelector('.letter');
const front = document.querySelector('.front');

/* âœ¨ í¸ì§€/ë´‰íˆ¬ ì• ë‹ˆë©”ì´ì…˜ ê°’ âœ¨ */
const flapRotationDuration = 1000;   // flap íšŒì „ ì†ë„ (ms)
const letterUpDistance = -180;       // í¸ì§€ ìœ„ë¡œ ì´ë™ ê±°ë¦¬ (px)
const letterUpDuration = 1000;        // í¸ì§€ ìœ„ë¡œ ì˜¬ë¼ê°€ëŠ” ì‹œê°„ (ms)
const letterStayDuration = 200;      // í¸ì§€ ìœ„ì— ë¨¸ë¬´ë¥´ëŠ” ì‹œê°„ (ms)
const letterDownDistance = 0;        // í¸ì§€ ë‚´ë ¤ê°ˆ ê¸°ë³¸ ìœ„ì¹˜ (px)
const letterDownDuration = 1000;      // í¸ì§€ ë‚´ë ¤ê°€ëŠ” ì‹œê°„ (ms)

const bodyRotateDegree = 10;         // ë´‰íˆ¬ ê·¸ë£¹ íšŒì „ ê°ë„ (deg)
const bodyMoveRight = 40;            // ë´‰íˆ¬ ì˜¤ë¥¸ìª½ ì´ë™ ê±°ë¦¬ (px)
const bodyMoveUp = -10;              // ë´‰íˆ¬ ìœ„ë¡œ ì´ë™ ê±°ë¦¬ (px)
const bodyMoveDuration = 700;        // ë´‰íˆ¬ ì´ë™/íšŒì „ ì‹œê°„ (ms)

const letterRotateDegree = -10;      // í¸ì§€ íšŒì „ ê°ë„ (deg)
const letterMoveLeft = 40;           // í¸ì§€ ì™¼ìª½ ì´ë™ ê±°ë¦¬ (px)
const letterMoveDown = 50;           // í¸ì§€ ì•„ë˜ ì´ë™ ê±°ë¦¬ (px)
const letterRotateDuration = 800;    // í¸ì§€ ì´ë™/íšŒì „ ì‹œê°„ (ms)

/* âœ¨ ë°°ê²½/í…ìŠ¤íŠ¸ ì• ë‹ˆë©”ì´ì…˜ ê°’ âœ¨ */
const bgTransitionDelay = 1500;      // í¸ì§€ ì´ë™ ëë‚œ í›„ ë°°ê²½ ì „í™˜ê¹Œì§€ ë”œë ˆì´ (ms)
const textScrollDistance = 100;      // ìŠ¤í¬ë¡¤ ê±°ë¦¬ (px)
const textScrollDuration = 1000;     // ìŠ¤í¬ë¡¤ ì‹œê°„ (ms)
const textStaggerDelay = 700;        // í…ìŠ¤íŠ¸ ìˆœì°¨ ë“±ì¥ ë”œë ˆì´ (ms)

/* âœ¨ í…ìŠ¤íŠ¸ ìš”ì†Œ âœ¨ */
const triggerSection = document.getElementById('triggerSection');
const textElements = document.querySelectorAll('.jungle-cont__title, .jungle-cont__sub, .jungle-cont__desc');

window.addEventListener('load', () => {
  setTimeout(() => {
    // flap ì—´ê¸°
    flap.style.transition = `transform ${flapRotationDuration}ms ease-in-out`;
    flap.style.transform = 'translateY(0.5px) rotateX(-180deg)';

    shadowFlap.style.transition = `transform ${flapRotationDuration}ms ease-in-out, opacity ${flapRotationDuration/2}ms ease-in-out`;
    shadowFlap.style.transform = 'translateY(0.5px) rotateX(-180deg)';
    shadowFlap.style.opacity = 1;

    // í¸ì§€ ì˜¬ë¼ì˜¤ê¸°
    setTimeout(() => {
      flap.style.zIndex = 2;
      shadowFlap.style.zIndex = 3;
      letter.style.zIndex = 4;
      letter.style.transition = `transform ${letterUpDuration}ms ease-in-out`;
      letter.style.transform = `translateY(${letterUpDistance}px)`;
    }, flapRotationDuration + 50);

    // í¸ì§€ ë‚´ë ¤ì˜¤ë©° íšŒì „/ì´ë™
    setTimeout(() => {
      letter.style.transition = `transform ${letterRotateDuration}ms ease-in-out`;
      letter.style.transform = `translateX(-${letterMoveLeft}px) translateY(${letterDownDistance + letterMoveDown}px) rotate(${letterRotateDegree}deg)`;

      envelopeBody.style.transition = `transform ${bodyMoveDuration}ms ease-in-out`;
      envelopeBody.style.transform = `translateX(${bodyMoveRight}px) translateY(${bodyMoveUp}px) rotate(${bodyRotateDegree}deg)`;

      front.style.zIndex = 5;

      // ë°°ê²½/í…ìŠ¤íŠ¸/ìŠ¤í¬ë¡¤ ì‹¤í–‰
      setTimeout(() => {
        document.body.style.backgroundColor = '#ffffff';
        triggerSection.classList.add('trigger-active');
        textElements.forEach((el, idx) => {
          setTimeout(() => { el.classList.add('show'); }, idx * textStaggerDelay);
        });
        smoothScrollBy(textScrollDistance, textScrollDuration);
      }, bgTransitionDelay);
    }, flapRotationDuration + 50 + letterUpDuration + letterStayDuration);
  }, 1500); // load í›„ ì‹œì‘ ë”œë ˆì´
});

// ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤
function smoothScrollBy(distance, duration) {
  const start = window.scrollY;
  const target = start + distance;
  const startTime = performance.now();

  function step(currentTime) {
    const elapsed = currentTime - startTime;
    const progress = Math.min(elapsed / duration, 1);
    const ease = 1 - Math.pow(1 - progress, 3);
    window.scrollTo(0, start + (target - start) * ease);
    if (progress < 1) requestAnimationFrame(step);
  }
  requestAnimationFrame(step);
}
</script>

</body>
</html>
